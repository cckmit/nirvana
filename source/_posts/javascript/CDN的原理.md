---
title: CDN的原理
date: 2022-01-23 16:28:03
categories: 前端
---
## CDN组成原理
最简单的CDN网络由一个DNS服务器和几台缓存服务器组成： 
- ①当用户点击网站页面上的内容URL，经过本地DNS系统解析，DNS系统会最终将域名的解析权交给CNAME指向的CDN专用DNS服务器。
- ②CDN的DNS服务器将CDN的全局负载均衡设备IP地址返回用户。 
- ③用户向CDN的全局负载均衡设备发起内容URL访问请求。 
- ④CDN全局负载均衡设备根据用户IP地址，以及用户请求的内容URL，选择一台用户所属区域的区域负载均衡设备，告诉用户向这台设备发起请求。 
- ⑤区域负载均衡设备会为用户选择一台合适的缓存服务器提供服务，选择的依据包括：根据用户IP地址，判断哪一台服务器距用户最近；
根据用户所请求的URL中携带的内容名称，判断哪一台服务器上有用户所需内容；
查询各个服务器当前的负载情况，判断哪一台服务器尚有服务能力。
基于以上这些条件的综合分析之后，区域负载均衡设备会向全局负载均衡设备返回一台缓存服务器的IP地址。 
- ⑥全局负载均衡设备把服务器的IP地址返回给用户。 
⑦用户向缓存服务器发起请求，缓存服务器响应用户请求，将用户所需内容传送到用户终端。如果这台缓存服务器上并没有用户想要的内容，而区域均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉到本地。

![](https://upload-images.jianshu.io/upload_images/10024246-20f186fc6e1096e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## CDN主要作用？

- 1. 为了提升用户访问体验 将静态内容，比如图片、视频、音频、JS文件、CSS文件、静态页面等内容缓存到CDN节点上，实现用户请求后的就近访问，降低传输链路延时。

- 2.为了实现跨运营商、跨地域的全网覆盖 互联不互通、区域ISP地域局限、出口带宽受限制等种种因素都造成了网站的区域性无法访问。CDN加速可以覆盖全球的线路，通过和运营商合作，部署IDC资源，在全国骨干节点商，合理部署CDN边缘分发存储节点，充分利用带宽资源，平衡源站流量。

- 3.为了保障你的网站安全 CDN的负载均衡和分布式存储技术，可以加强网站的可靠性，相当于无形中给你的源站添加了一把保护伞，将绝大部分的互联网攻击事件与源站隔离，避免源站遭到恶意攻击而带来的业务停摆或者资产损失。

- 4.为了异地备援 当某个服务器发生意外故障时，系统将会调用其他临近的健康服务器节点进行服务，进而提供接近100%的可靠性，这就让你的网站可以做到永不宕机。

- 5.为了节约成本投入 使用CDN加速可以实现网站的全国铺设，你根据不用考虑购买服务器与后续的托管运维，服务器之间镜像同步，也不用为了管理维护技术人员而烦恼，节省了人力、精力和财力。

- 6.为了让你更专注业务本身 CDN加速厂商一般都会提供一站式服务，业务不仅限于CDN，还有配套的云存储、大数据服务、视频云服务等，而且一般会提供7x24运维监控支持，保证网络随时畅通，你可以放心使用。并且将更多的精力投入到发展自身的核心业务之上。
